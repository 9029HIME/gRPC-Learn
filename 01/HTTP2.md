# HTTP2

​	像SpringCloud基于HTTP1.1，Dubbo基于TCP，一个合适的RPC框架底层需要基于网络传输协议。gRPC则是基于HTTP2。HTTP2作为一个二进制协议，对Headers能够进行有效压缩。HTTP2支持多路复用，**可以在一个TCP连接上发送多个请求和响应**（请求1→请求2→请求3→响应2→响应1→响应3）。

​	同时，HTTP2在应用层与传输层中间加了一个二进制分帧层（Binary Framing）

![分帧层](https://user-images.githubusercontent.com/48977889/111896879-800c2700-8a57-11eb-9e18-5985bfa89bb0.jpg)

​	HTTP2的数据会通过分帧层将头信息封装成二进制的Headers frame，将数据载荷封装成二进制的Data frame



# gRPC vs Rest(SpringCloud)

​	

|    特征    |                    gRPC                     |                    Rest                     |
| :--------: | :-----------------------------------------: | :-----------------------------------------: |
|  传输协议  |                    HTTP2                    |                   HTTP1.1                   |
|  数据格式  |                  Protobuf                   |                    JSON                     |
|  代码生成  |             基于Protobuf编译器              |                  手动编写                   |
|    安全    |                 可以基于SSL                 |                 可以基于SSL                 |
|   流方向   | 双向（请求1→请求2→请求3→响应2→响应1→响应3） | 单项（请求1→响应1→请求2→响应2→请求3→响应3） |
| 浏览器支持 |            部分支持gRPC的浏览器             |                    所有                     |

​	基于浏览器不是特别兼容gRPC，因此在前后端分离交互中还是常用Rest，但gRPC高性能的特点很适合用于微服务组件之间的服务调用，**特别是不同组件是由不同语言编写的微服务结构**。